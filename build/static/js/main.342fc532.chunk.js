(this["webpackJsonphow-hipster-client"]=this["webpackJsonphow-hipster-client"]||[]).push([[0],{28:function(e,t){},59:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(0),a=n(5),c=n.n(a),u=n(4),s=n(3),i=n(26),l=n(27),h=n.n(l),f="LOGIN",j={hipsterPercent:null,name:null,loggedIn:!1,authToken:null,refreshToken:null},p={error:null,loading:!1},d=Object(s.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object.assign({},e,{loggedIn:!0,authToken:t.authToken,refreshToken:t.refreshToken});default:return e}},site:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;return t.type,e}}),b=Object(s.d)(d,Object(s.a)(i.a,h.a)),g=n(6),k=n(7),T=n(9),O=n(8),v=(n(39),n(58),n(10)),m=n.n(v);function x(){return function(e,t){var n=t().user,r=function(e){var t=e,n=t.authToken,r=void 0===n?null:n,o=t.refreshToken,a=void 0===o?null:o;return r&&a?e:(a=localStorage.getItem("refreshToken"),r=localStorage.getItem("authToken"),e=a&&r?{authToken:r,refreshToken:a}:null)}({authToken:n.authToken,refreshToken:n.refreshToken}),o=function(){var e=localStorage.getItem("timestamp");return e&&m()(e).add(1,"day")<m()(e)}();r&&!o||localStorage.clear(),e(function(e){return e=e||function(){var e,t={},n=/([^&;=]+)=?([^&;]*)/g,r=window.location.hash.substring(1);e=n.exec(r);for(;e;)t[e[1]]=decodeURIComponent(e[2]),e=n.exec(r);var o=t.authToken,a=t.refreshToken,c=t.error;return c||{authToken:o,refreshToken:a}}(),console.log(e),function(t){var n,r;e.authToken&&e.refreshToken&&!e.error?(localStorage.setItem("authToken",e.authToken),localStorage.setItem("refreshToken",e.refreshToken),localStorage.setItem("timestamp",m()().format("X")),t((n=e.authToken,r=e.refreshToken,{type:f,authToken:n,refreshToken:r}))):t((function(e){localStorage.clear(),e({type:"LOGOUT"})}))}}(r))}}var y=function(e){Object(T.a)(n,e);var t=Object(O.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"render",value:function(){var e=this;return Object(r.jsxs)("div",{className:"Landing",children:[Object(r.jsx)("h1",{children:" How Hipster Are You? "}),Object(r.jsx)("h3",{children:" Blah "}),Object(r.jsx)("div",{className:"app-buttonContainer",children:Object(r.jsx)("a",{onClick:function(){return e.props.login()},children:Object(r.jsx)("button",{className:"largeButton",children:" Log In With Spotify "})})})]})}}]),n}(o.Component);var I=Object(u.b)(null,(function(e){return{login:Object(s.b)(x,e)}}))(y),S=n(28),w=n.n(S),C=function(e){Object(T.a)(n,e);var t=Object(O.a)(n);function n(){return Object(g.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"componentWillMount",value:function(){this.props.login(),this.props.history.push({},"http://localhost:3000")}},{key:"render",value:function(){var e=this.props.user.loggedIn;return Object(r.jsx)("div",{className:"App",children:e?Object(r.jsx)(w.a,{}):Object(r.jsx)(I,{})})}}]),n}(o.Component);var N=Object(u.b)((function(e){return{user:e.user,error:e.site.error,loading:e.site.loading}}),(function(e){return{login:Object(s.b)(x,e)}}))(C),L=document.getElementById("root");c.a.render(Object(r.jsx)(u.a,{store:b,children:Object(r.jsx)(N,{})}),L)}},[[59,1,2]]]);
//# sourceMappingURL=main.342fc532.chunk.js.map